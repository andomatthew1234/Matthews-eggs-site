<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chicken Egg Background</title>
    <style>
        /* Basic styling to make the canvas fill the page and remove scrollbars */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #87CEEB; /* A nice sky blue background */
        }

        /* The canvas will be the background */
        #fireworks-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0; 
        }

        /* Style for any content you want to put on top of the chickens */
        .content {
            position: relative;
            z-index: 1;
            color: white;
            text-align: center;
            padding-top: 50px;
            font-family: 'Inter', sans-serif;
            font-size: 2rem;
            text-shadow: 2px 2px 4px #000000;
        }
        
        /* Styling for the new Spam button */
        #spam-button {
            background-color: #ff4757; /* A nice red color */
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            text-transform: uppercase;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s ease, transform 0.1s ease;
        }

        #spam-button:hover {
            background-color: #ff6b81;
        }

        #spam-button:active {
            transform: translateY(2px);
            box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2);
        }

    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="content">
        <h1>Chicken Invasion!</h1>
        <p>Click anywhere for a gooey egg explosion!</p>
        <button id="spam-button">Spam Eggs</button>
    </div>

    <canvas id="fireworks-canvas"></canvas>

    <script>
        // Get the canvas and its 2D rendering context
        const canvas = document.getElementById('fireworks-canvas');
        const ctx = canvas.getContext('2d');

        // Set canvas dimensions to fill the window
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Arrays to store all game objects
        let chickens = [];
        let fallingEggs = [];
        let particles = [];
        let animationFrame = 0;

        // --- Helper Functions ---
        function random(min, max) {
            return Math.random() * (max - min) + min;
        }

        function calculateDistance(p1x, p1y, p2x, p2y) {
            const xDistance = p1x - p2x;
            const yDistance = p1y - p2y;
            return Math.sqrt(Math.pow(xDistance, 2) + Math.pow(yDistance, 2));
        }

        // --- Chicken Class ---
        class Chicken {
            constructor(startX, startY, endX, endY) {
                this.x = startX;
                this.y = startY;
                this.startX = startX;
                this.startY = startY;
                this.endX = endX;
                this.endY = endY;
                this.distanceToEnd = calculateDistance(startX, startY, endX, endY);
                this.distanceTraveled = 0;
                this.angle = Math.atan2(endY - startY, endX - startX);
                this.speed = random(2, 4);
                this.wobbleSpeed = random(0.05, 0.1);
            }

            update() {
                const vx = Math.cos(this.angle) * this.speed;
                const vy = Math.sin(this.angle) * this.speed;
                this.distanceTraveled = calculateDistance(this.startX, this.startY, this.x + vx, this.y + vy);

                // When the chicken reaches its destination, it drops an egg
                if (this.distanceTraveled >= this.distanceToEnd) {
                    fallingEggs.push(new FallingEgg(this.endX, this.endY));
                    chickens.splice(chickens.indexOf(this), 1);
                } else {
                    this.x += vx;
                    this.y += vy;
                }
            }

            draw() {
                ctx.save();
                const wobbleX = Math.cos(animationFrame * this.wobbleSpeed) * 10;
                const wobbleY = Math.sin(animationFrame * this.wobbleSpeed) * 10;
                ctx.translate(this.x + wobbleX, this.y + wobbleY);
                ctx.rotate(this.angle + Math.PI / 2);
                ctx.font = '30px serif';
                ctx.textAlign = 'center';
                ctx.fillText('üêî', 0, 0);
                ctx.restore();
            }
        }

        // --- FallingEgg Class ---
        class FallingEgg {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.vy = 0; // Vertical velocity
                this.gravity = 0.4;
                this.life = 25; // Frames to fall before breaking
            }

            update() {
                this.life--;
                this.y += this.vy;
                this.vy += this.gravity;

                // When the egg's life is over, it explodes
                if (this.life <= 0) {
                    createEggExplosion(this.x, this.y);
                    fallingEggs.splice(fallingEggs.indexOf(this), 1);
                }
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.font = '25px serif';
                ctx.textAlign = 'center';
                ctx.fillText('ü•ö', 0, 0);
                ctx.restore();
            }
        }

        // --- Particle Class (for yolk, white, and shell) ---
        class Particle {
            constructor(x, y, type) {
                this.x = x;
                this.y = y;
                this.type = type;
                this.angle = random(0, Math.PI * 2);
                this.speed = random(1, 10);
                this.gravity = 0.5;
                this.alpha = 1;

                // Customize particles based on their type
                switch (this.type) {
                    case 'yolk':
                        this.friction = 0.97;
                        this.color = `hsl(${random(40, 60)}, 100%, ${random(50, 80)}%)`;
                        this.size = random(3, 6);
                        this.decay = random(0.01, 0.02);
                        break;
                    case 'white':
                        this.friction = 0.98; // Gooier
                        this.color = `hsla(0, 0%, 100%, ${random(0.3, 0.6)})`;
                        this.size = random(4, 8);
                        this.decay = random(0.01, 0.015);
                        break;
                    case 'shell':
                        this.friction = 0.95; // Less friction
                        this.color = `hsl(35, 20%, ${random(70, 85)}%)`;
                        this.size = random(1, 3);
                        this.gravity = 0.8; // Heavier
                        this.decay = random(0.02, 0.03);
                        break;
                }
            }

            update() {
                this.speed *= this.friction;
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed + this.gravity;
                this.alpha -= this.decay;

                if (this.alpha <= this.decay) {
                    particles.splice(particles.indexOf(this), 1);
                }
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.restore();
            }
        }

        // --- Create Egg Explosion ---
        function createEggExplosion(x, y) {
            const particleCount = 200; // More particles for a bigger mess
            for (let i = 0; i < particleCount; i++) {
                const rand = Math.random();
                let type;
                if (rand < 0.5) {
                    type = 'yolk';
                } else if (rand < 0.9) {
                    type = 'white';
                } else {
                    type = 'shell';
                }
                particles.push(new Particle(x, y, type));
            }
        }

        // --- Animation Loop ---
        function animate() {
            requestAnimationFrame(animate);
            animationFrame++;

            ctx.fillStyle = 'rgba(135, 206, 235, 0.3)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            [chickens, fallingEggs, particles].forEach(arr => 
                arr.forEach(item => {
                    item.update();
                    item.draw();
                })
            );
        }

        function spawnChicken(endX, endY) {
            const side = Math.floor(random(0, 2));
            const startX = side === 0 ? -50 : canvas.width + 50;
            const startY = random(0, canvas.height);
            chickens.push(new Chicken(startX, startY, endX, endY));
        }

        // --- Event Listeners ---
        window.addEventListener('click', e => {
            // Prevent spam button click from also spawning a single chicken
            if (e.target.id === 'spam-button') return;
            spawnChicken(e.clientX, e.clientY);
        });
        
        // Add the spam button functionality
        const spamButton = document.getElementById('spam-button');
        spamButton.addEventListener('click', () => {
            for (let i = 0; i < 1000; i++) {
                const x = random(0, canvas.width);
                const y = random(0, canvas.height);
                // Directly create a falling egg at a random location
                fallingEggs.push(new FallingEgg(x, y));
            }
        });

        // Automatically spawn chickens
        setInterval(() => {
            const endX = random(0, canvas.width);
            const endY = random(0, canvas.height);
            spawnChicken(endX, endY);
        }, 3000);

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        animate();
    </script>

</body>
</html>
